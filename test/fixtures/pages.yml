--- !omap
<%
  ##
  ## NOTE!!! IF YOU MODIFY THIS FILE, YOU NEED TO THEN RUN THIS
  ## rake cg:test:update_fixtures
  ##

# make result of 'rand()' be consistent
srand(314159265359)


$text_pool = %q[
Mauris tristique magna ut mauris. Praesent id tellus vel odio fringilla suscipit. Morbi ultrices blandit turpis. Vestibulum justo dolor, malesuada nec, ornare id, venenatis eu, est. Donec vitae purus in augue interdum tincidunt. Sed ullamcorper turpis nec risus. Sed blandit elit a libero. Suspendisse potenti. Donec rhoncus pede sit amet massa. In suscipit ligula a nisi. Quisque augue. Maecenas mollis ipsum vitae lacus. Integer ornare. In metus libero, vulputate at, ultricies eget, ullamcorper nec, massa. Duis quis lectus. Vestibulum luctus, sapien sit amet aliquet adipiscing, pede dolor gravida odio, a pellentesque sem tortor ac nisi. Cras commodo. Aliquam arcu. Integer in odio et lectus facilisis ultrices. Sed congue metus a felis.
Integer ut orci id arcu pulvinar imperdiet. Integer faucibus lorem et risus. Vivamus erat mauris, cursus non, auctor vitae, rhoncus in, lectus. Sed et magna. Sed porttitor ornare tellus. Praesent in enim nec quam tempus lacinia. Curabitur ipsum risus, volutpat ac, convallis eu, vestibulum vitae, massa. Nulla facilisi. Donec venenatis lorem id nunc. Etiam id felis sit amet erat imperdiet luctus. Cras nec arcu id justo aliquet luctus. Phasellus dictum dictum lacus. Cras neque lacus, lacinia quis, egestas et, mollis a, augue.
Vestibulum sodales rhoncus dolor. Fusce sit amet justo. Mauris fringilla. Vestibulum faucibus ultricies lorem. Nunc posuere ipsum aliquam nulla. Nullam tortor justo, cursus vestibulum, volutpat sed, interdum vel, orci. Donec euismod ultrices odio. Suspendisse eu odio sit amet odio vulputate tristique. Vestibulum massa. Vestibulum nec orci. Cras tellus pede, tincidunt vitae, adipiscing ut, rutrum ut, urna. Integer ultricies, nunc id vulputate dapibus, magna velit bibendum nulla, nec congue nulla magna nec tortor. Aenean eget ante a leo auctor ultrices. Nunc interdum. Suspendisse potenti. Aenean nulla. Aliquam vitae ante. Sed eu orci. Etiam justo libero, tempus at, viverra sodales, imperdiet vitae, diam.
Vestibulum dignissim ultricies odio. Etiam vestibulum, velit eu iaculis porta, libero ipsum mollis quam, ac tincidunt eros augue ac tortor. Cras tristique congue risus. Quisque nulla. Vivamus at dui. Nam ullamcorper volutpat est. Nullam sollicitudin, mauris ut eleifend sagittis, lorem tellus pellentesque felis, sit amet malesuada pede risus ut sem. Donec et pede. Donec ultrices blandit odio. Mauris facilisis orci. Morbi dolor. Pellentesque ut elit. Mauris ante eros, pulvinar quis, congue vitae, ultricies nec, justo. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Vivamus nulla ligula, ornare nec, convallis et, commodo pulvinar, metus. Integer eu dolor ac dui tincidunt interdum. Maecenas blandit nisi lobortis velit rutrum vulputate. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos hymenaeos. Cras mi nisi, pretium euismod, scelerisque sed, tincidunt vel, arcu. Fusce risus.
Praesent porta. Suspendisse potenti. Vestibulum nisi risus, tincidunt at, nonummy vel, aliquet sit amet, risus. Donec suscipit, lorem et tincidunt facilisis, risus est cursus lacus, vitae rutrum augue orci ullamcorper mauris. Fusce ornare accumsan massa. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos hymenaeos. Maecenas at mauris. Etiam ullamcorper, velit ut condimentum ultricies, sem nulla nonummy risus, eu mollis mi metus ac nulla. Sed id velit vel eros viverra rhoncus. Nulla ac neque. Ut ipsum. Sed sem. Donec eu leo. Morbi tortor. Vivamus eleifend est at risus.
]
$text_pool_length = $text_pool.length

# pass in a range of how much random garbled text
# you want.
def garble(range)
  dist = range.last - range.first
  a = rand($text_pool_length-(range.first+dist))
  b = range.first + rand(dist)
  $text_pool.slice(a,b).strip
end

owner_groups = ['rainbow', 'animals']
owner_users = ['blue', 'orange', 'red', 'kangaroo']

%>

<% for i in 1..10 %>
page<%=i%>:
  name: page<%=i%>
  title: "<%= garble(5..50) %>"
  summary: "<%= garble(40..300) %>"
<% updated = rand(46080); created = updated + rand(46080) %>
  updated_at: "<%= updated.minutes.ago.to_s(:db) %>"
  created_at: "<%= created.minutes.ago.to_s(:db) %>"
<% if rand(3) == 0 %>
  stars_count: <%= rand(4) %>
<% end %>
<% if rand(3) == 0 %>
  resolved: false
<% end %>
<% group = owner_groups[rand(2)]%>
<% user = owner_users[rand(4)] %>
  updated_by_login: <%= user %>
  updated_by: <%= user %>
<% if rand(1) == 0 %>
  owner_type: Group
  owner: <%= group %> (Group)
  owner_name: <%= group %>
<% else %>
  owner_type: User
  owner: <%= user %> (User)
  owner_name: <%= user %>
<% end %>
  type: DiscussionPage
  public: <%= rand(4) == 0 %>
<% end %>


committee_page:
  name: "committee_page"
  title: "page owned by the warm colors"
  <% updated = rand(46080); created = updated + rand(46080) %>
  updated_at: "<%= updated.minutes.ago.to_s(:db) %>"
  created_at: "<%= created.minutes.ago.to_s(:db) %>"
  updated_by: blue
  owner: warm (Group)
  owner_type: Group
  owner_name: rainbow+the-warm-colors
  type: DiscussionPage

blue_page:
  name: "blue_page"
  title: "page owned by blue, rainbow has access @test.me"
  <% updated = 1; created = updated + rand(46080) %>
  updated_at: "<%= updated.minutes.ago.to_s(:db) %>"
  created_at: "<%= created.minutes.ago.to_s(:db) %>"
  owner: blue (User)
  owner_name: blue
  owner_type: User
  updated_by: blue
  type: DiscussionPage
  summary: Find this page in the test for escaping chars

rainbow_page:
  name: "rainbow_page"
  title: "page owned by rainbow"
  <% updated = rand(46080); created = updated + rand(46080) %>
  updated_at: "<%= updated.minutes.ago.to_s(:db) %>"
  created_at: "<%= created.minutes.ago.to_s(:db) %>"
  owner: rainbow (Group)
  owner_type: Group
  owner_name: rainbow
  updated_by: blue
  type: DiscussionPage


ranked_vote:
  name: ranked_vote
  title: a ranked vote
  type: RankedVotePage
  data_type: Poll
  data_id: 1
  created_by: quentin
  created_by_login: quentin
  updated_by: gerrard
  updated_by_login: gerrard
<% updated = rand(4320); created = updated + rand(4320) %>
  updated_at: "<%= updated.minutes.ago.to_s(:db) %>"
  created_at: "<%= created.minutes.ago.to_s(:db) %>"
  owner: quentin (User)
  owner_type: User
  owner_name: quentin

tasklist1:
  name: a_task_list
  title: a task list
  type: TaskListPage
  created_by: quentin
  created_by_login: quentin
  updated_by: gerrard
  updated_by_login: gerrard
<% updated = rand(4320); created = updated + rand(4320) %>
  updated_at: "<%= updated.minutes.ago.to_s(:db) %>"
  created_at: "<%= created.minutes.ago.to_s(:db) %>"
  owner: blue (User)
  owner_type: User
  owner_name: blue

tasklist2:
  name: another_task_list
  title: another task list
  type: TaskListPage
  created_by: blue
  created_by_login: blue
  updated_by: orange
  updated_by_login: orange
  resolved: false
  public: 1
<% updated = rand(4320); created = updated + rand(4320) %>
  updated_at: "<%= updated.minutes.ago.to_s(:db) %>"
  created_at: "<%= created.minutes.ago.to_s(:db) %>"
  site_id: 2 # so this can be found by site tests for root controller
  owner: rainbow (Group)
  owner_type: Group
  owner_name: rainbow

delete_test: # also serves as flow test.
  name: delete_test
  title: delete test
  created_by: blue
  created_by_login: blue
  updated_by: blue
  updated_by_login: blue
  type: DiscussionPage
  flow: "<%= FLOW[:deleted] %>"
  public: 1
<% updated = rand(46080); created = updated + rand(46080) %>
  updated_at: "<%= updated.minutes.ago.to_s(:db) %>"
  created_at: "<%= created.minutes.ago.to_s(:db) %>"
  owner: blue (User)
  owner_type: User
  owner_name: blue

wiki:
  name: test_wiki
  title: test wiki
  type: WikiPage
  data_type: Wiki
  data: first
  created_by: quentin
  created_by_login: quentin
  updated_by: gerrard
  updated_by_login: gerrard
<% updated = rand(46080); created = updated + rand(46080) %>
  updated_at: "<%= updated.minutes.ago.to_s(:db) %>"
  created_at: "<%= created.minutes.ago.to_s(:db) %>"
  owner: blue  (User)
  owner_type: User
  owner_name: blue

public_wiki:
  name: public_wiki
  title: public wiki
  type: WikiPage
  data_type: Wiki
  data: for_public
  public: 1
  created_by: quentin
  created_by_login: quentin
  updated_by: gerrard
  updated_by_login: gerrard
<% updated = rand(46080); created = updated + rand(46080) %>
  updated_at: "<%= updated.minutes.ago.to_s(:db) %>"
  created_at: "<%= created.minutes.ago.to_s(:db) %>"
  owner: quentin (User)
  owner_type: User
  owner_name: quentin

malformed_wiki:
  name: malformed_wiki
  title: malformed wiki
  type: WikiPage
  data_type: Wiki
  data: malformed
  created_by: quentin
  created_by_login: quentin
  updated_by: gerrard
  updated_by_login: gerrard
<% updated = rand(46080); created = updated + rand(46080) %>
  updated_at: "<%= updated.minutes.ago.to_s(:db) %>"
  created_at: "<%= created.minutes.ago.to_s(:db) %>"
  owner: quentin (User)
  owner_type: User
  owner_name: quentin

multi_section_wiki:
  name: multi_section_wiki
  title: multi section wiki
  type: WikiPage
  data_type: Wiki
  data: multi_section
  created_by: blue
  created_by_login: blue
  updated_by: gerrard
  updated_by_login: gerrard
<% updated = rand(4608); created = updated + rand(4608) %>
  updated_at: "<%= updated.minutes.ago.to_s(:db) %>"
  created_at: "<%= created.minutes.ago.to_s(:db) %>"
  owner: blue (User)
  owner_type: User
  owner_name: blue

announcement1:
  name: announcement1
  title: Beauty is in the Street Video Available
  summary: we even summarize it here.
  type: AnnouncementPage
  data: announcement
  data_type: Wiki
  owner: true_levellers (Group)
  owner_type: Group
  owner_name: the-true-levellers
  public: "1"
  flow: "<%= FLOW[:announcement]%>"
  created_by: quentin
  created_by_login: quentin
  updated_by: gerrard
  updated_by_login: gerrard
<% updated = rand(4608); created = updated + rand(4608) %>
  updated_at: "<%= updated.minutes.ago.to_s(:db) %>"
  created_at: "<%= created.minutes.ago.to_s(:db) %>"
  owner: quentin (User)
  owner_type: User
  owner_name: quentin

##
## ASSETS
##

asset1:
  name: asset1
  owner_name: animals
  owner: animals (Group)
  owner_type: Group
  created_by_login: blue
  updated_by: blue
  public: "1"
  resolved: "1"
  title: bee
  data_type: Asset
  type: AssetPage
  updated_by_login: blue
  message_count: "0"
  created_by: blue
  summary: ""
  contributors_count: "0"
  data_id: 1
  is_image: "1"
<% updated = rand(4320); created = updated + rand(4320) %>
  updated_at: "<%= updated.minutes.ago.to_s(:db) %>"
  created_at: "<%= created.minutes.ago.to_s(:db) %>"

asset2:
  name: asset2
  owner_name: animals
  owner: animals (Group)
  owner_type: Group
  created_by_login: blue
  updated_by: blue
  public:
  resolved: "1"
  title: sunset
  data_type: Asset
  type: AssetPage
  updated_by_login: blue
  message_count: "0"
  created_by: blue
  summary: ""
  contributors_count: "0"
  data_id: 2
  is_image: "1"
<% updated = rand(4320); created = updated + rand(4320) %>
  updated_at: "<%= updated.minutes.ago.to_s(:db) %>"
  created_at: "<%= created.minutes.ago.to_s(:db) %>"

asset3:
  name: asset3
  owner_name: animals
  owner: animals (Group)
  owner_type: Group
  created_by_login: blue
  updated_by: blue
  public:
  resolved: "1"
  title: crabgrass
  data_type: Asset
  type: AssetPage
  updated_by_login: blue
  message_count: "0"
  created_by: blue
  summary: ""
  contributors_count: "0"
  data_id: 3
  is_image: "1"
<% updated = rand(4320); created = updated + rand(4320) %>
  updated_at: "<%= updated.minutes.ago.to_s(:db) %>"
  created_at: "<%= created.minutes.ago.to_s(:db) %>"

survey1:
  name: survey1
  created_by: blue
  updated_by: blue
  created_by_login: blue
  updated_by_login: blue
  public: true
  resolved: "1"
  title: survey ipsum
  data_type: Survey
  type: SurveyPage
  message_count: "0"
  summary: ""
  contributors_count: "0"
  data: "1"
<% updated = rand(4320); created = updated + rand(4320) %>
  updated_at: "<%= updated.minutes.ago.to_s(:db) %>"
  created_at: "<%= created.minutes.ago.to_s(:db) %>"
  owner: blue (User)
  owner_type: User
  owner_name: blue

survey_blank:
  name: survey_blank
  created_by_login: blue
  updated_by: blue
  public: true
  resolved: "1"
  title: a blank survey
  data_type: Survey
  type: SurveyPage
  updated_by_login: blue
  message_count: "0"
  created_by: blue
  summary: ""
  contributors_count: "0"
  data: "3"
<% updated = rand(4320); created = updated + rand(4320) %>
  updated_at: "<%= updated.minutes.ago.to_s(:db) %>"
  created_at: "<%= created.minutes.ago.to_s(:db) %>"
  owner: blue (User)
  owner_type: User
  owner_name: blue



#announcement:
#  name:
#  created_by_login: blue
#  created_by: blue
#  title: an announcement
#  type: AnnouncementPage

rate_many_page:
  name: rate_many_page
  title: odit ipsa quam
  created_by: orange
  created_by_login: orange
  data_type: Poll
  updated_by_login: orange
  type: RateManyPage
  data_id: 2
  owner_name: orange
  owner: orange (User)
  updated_at: "<%= updated.minutes.ago.to_s(:db) %>"
  created_at: "<%= created.minutes.ago.to_s(:db) %>"
  owner: orange (User)
  owner_type: User
  owner_name: orange
